/**
 * Pilpil v1.0.0 - Progressive Image Loading
 * @link https://zafree.github.io/pilpil
 * @copyright 2015-2016 Zafree
 * @license MIT
 */
!function(){"use strict";function t(t){var e=t.dataset.width,i=t.dataset.height,a=i/e*100,n=t.previousElementSibling;n.setAttribute("style","padding-bottom:"+a+"%;")}function e(t){var e=t.parentElement,i=e.offsetWidth,a=e.offsetHeight;e.setAttribute("style","max-width:"+i+"px; max-height:"+a+"px;")}function i(t){var e=t.querySelector(".progressiveMedia-thumbnail"),i=e.width,n=e.height,r=t.querySelector(".progressiveMedia-canvas"),s=(r.getContext("2d"),new Image);r.height=n,r.width=i,s.src=e.src,s.onload=function(){var e=new o(r,s);e.blur(2),t.classList.add("is-canvasLoaded")},a(t)}function a(t){var e=t.querySelector(".progressiveMedia-image");e.src=e.dataset.src,e.onload=function(){t.classList.add("is-imageLoaded")}}function n(){for(var a=document.querySelectorAll(".progressiveMedia"),n=0;n<a.length;n++)t(a[n]),e(a[n]),i(a[n])}var o=function(t,e){this.image=e,this.element=t,t.width=e.width,t.height=e.height,this.context=t.getContext("2d"),this.context.drawImage(e,0,0)};o.prototype={blur:function(t){this.context.globalAlpha=.5;for(var e=-t;e<=t;e+=2)for(var i=-t;i<=t;i+=2){this.context.drawImage(this.element,i,e);i>=0&&e>=0&&this.context.drawImage(this.element,-(i-1),-(e-1))}}},n()}();